{{ define "main" }}
<article class="mx-auto">
  <!-- Hero Banner with Title Overlay -->
  <header class="relative w-full h-[400px] mb-8">
    {{ with .Params.image }}
    <img src="{{ . }}" alt="{{ $.Params.image_alt | default $.Title }}" class="w-full h-full object-cover" />
    <!-- Dark gradient overlay for text readability -->
    <div class="absolute inset-0 bg-gradient-to-t from-black/100 via-black/50 to-transparent"></div>
    {{ end }}

    <!-- Title and metadata overlaid on image -->
    <div class="absolute bottom-0 left-0 right-0 text-white p-8 max-w-4xl mx-auto">
      <h1 class="text-4xl lg:text-5xl font-bold">{{ .Title }}</h1>
      <p class="text-sm mb-2 opacity-90">{{ .Date.Format "Jan 2, 2006" }} • {{ range $i, $c := .Params.categories }}{{ if $i }}, {{ end }}{{ $c }}{{ end }}</p>
    </div>

    <!-- Photo credit in bottom right -->
    {{ if or .Params.photo_credit_author .Params.photo_credit_description }}
    <div class="absolute bottom-2 right-2 text-white text-xs opacity-75">
      {{ with .Params.photo_credit_author }}{{ . }}{{ end }}
      {{ if and .Params.photo_credit_author .Params.photo_credit_description }} • {{ end }}
      {{ with .Params.photo_credit_description }}{{ . }}{{ end }}
    </div>
    {{ end }}
  </header>

  <!-- Excerpt below banner -->
  {{ with .Params.excerpt }}
  <div class="max-w-4xl mx-auto px-8 mb-8">
    <p class="text-xl text-gray-700 leading-relaxed">{{ . | markdownify }}</p>
  </div>
  {{ end }}

  <!-- Main content -->
  <div class="prose lg:prose-xl mx-auto px-8">
    {{ .Content }}

    {{ partial "learn-more.html" . }}
  </div>

  <!-- Tags footer -->
  <footer class="max-w-4xl mx-auto px-8 mt-12 text-sm text-gray-600">
    {{ with .Params.tags }}Tags: {{ range $i, $t := . }}{{ if $i }}, {{ end }}<a href="{{ "/tags/" | relURL }}{{ urlize $t }}" class="hover:text-gray-900">{{ $t }}</a>{{ end }}{{ end }}
  </footer>
</article>
{{ end }}
